# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from .entity_id import EntityId


class IntelligentFieldValueResponse(UniversalBaseModel):
    """
    A single computed value for an intelligent field on a specific entity

    Examples
    --------
    import datetime

    from mavenagi.commons import EntityId, IntelligentFieldValueResponse

    IntelligentFieldValueResponse(
        field_id=EntityId(
            reference_id="ticket-priority",
            app_id="zendesk",
            organization_id="acme",
            agent_id="support",
            type="CONVERSATION",
        ),
        entity_id=EntityId(
            reference_id="ticket-123",
            app_id="zendesk",
            organization_id="acme",
            agent_id="support",
            type="CONVERSATION",
        ),
        value="HIGH",
        confidence=0.95,
        rationale="The conversation mentions a production outage affecting multiple customers, indicating high urgency and impact.",
        created_at=datetime.datetime.fromisoformat(
            "2024-01-15 10:30:00+00:00",
        ),
    )
    """

    field_id: typing_extensions.Annotated[EntityId, FieldMetadata(alias="fieldId")] = pydantic.Field()
    """
    The intelligent field that this value belongs to
    """

    entity_id: typing_extensions.Annotated[EntityId, FieldMetadata(alias="entityId")] = pydantic.Field()
    """
    The entity this value is for
    """

    value: typing.Optional[typing.Optional[typing.Any]] = pydantic.Field(default=None)
    """
    The computed value (typed according to validationType)
    """

    confidence: typing.Optional[float] = pydantic.Field(default=None)
    """
    Optional model-provided confidence for the value
    """

    rationale: typing.Optional[str] = pydantic.Field(default=None)
    """
    Optional short rationale/explanation from the model
    """

    created_at: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="createdAt")] = (
        pydantic.Field(default=None)
    )
    """
    The date and time this value was computed
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
